@page "/device"
@rendermode @(new InteractiveWebAssemblyRenderMode(true))

@inject IJSRuntime JSRuntime


@* @attribute [Authorize] *@


<div>
@* <div style="height: 100%; width: 100%; background-color: rgba(0,0,0,0.7); position: absolute; z-index: 1;"> *@
@*     @* screen dimmer here  <-----  all height and width  *@ 
@* </div> *@


    <section class="bg-gradient-to-br from-indigo-800 via-purple-800 to-pink-700 text-white min-h-[calc(100vh-8vh)] md:min-h-[calc(100vh-8vh)] ">
        @* <div class="max-w-5xl text-center"> *@
        <div class="max-w-4xl text-center " style="margin: 0 auto;">

            <div style="display: flex;
                            flex-direction: column;
                            padding: 40px;
                            justify-content: space-around;">

                <DeviceBaner />

                <DeviceStack IsEditable="isEditable" />

                <div class="mt-12 flex flex-col sm:flex-row justify-center gap-4 flex-sm-shrink-0">

                    <button @onclick="SwitchEditMode"
                            class="flex-1 bg-yellow-400 hover:bg-yellow-500 text-indigo-900 font-semibold px-6 py-3 rounded-lg shadow transition">
                        Edytuj Kafelki
                    </button>

                    <a href="/manager"
                       class="flex-1 text-center bg-yellow-400 hover:bg-yellow-500 text-indigo-900 font-semibold px-6 py-3 rounded-lg shadow transition">
                        Konfiguruj MQTT
                    </a>

                    <a href="#"
                       class="flex-1 text-center bg-white/20 hover:bg-white/30 text-white font-medium px-6 py-3 rounded-lg border border-white/30 shadow transition">
                        Historia pomiarów
                    </a>

                    <a href="/managerNotAuthorize"
                       class="flex-1 text-center bg-white/20 hover:bg-white/30 text-white font-medium px-6 py-3 rounded-lg border border-white/30 shadow transition">
                        Gość
                    </a>
                </div>
            </div>


        </div>
        @* </div> *@

    </section>
</div>




@code {

    //for handling screen dimmer info, when true then dimmer is on

    public bool isEditable { get; set; }


    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            await JSRuntime.InvokeVoidAsync("scrollToTop");
        }
    }

    private void SwitchEditMode(MouseEventArgs args)
    {
        Console.WriteLine("Edit mode button zolty: " + isEditable);

        isEditable = !isEditable;
        StateHasChanged();

    }
}
